#!/bin/bash
#SBATCH --ntasks-per-node=15
#SBATCH --mem=150G
#SBATCH --time=12:00:00
#SBATCH --partition=standard
#SBATCH --account=jcbnunez
#SBATCH --array=1-1

###########################################################################
###########################################################################
# Load R RIVANNA modules
###########################################################################
###########################################################################

module load gcc/7.1.0
module load openmpi/3.1.4
module load R/4.1.1

###########################################################################
###########################################################################
# Load some necessities for the array to work
###########################################################################
###########################################################################

### Run Virginia only
#guide=guide_VA_pops.txt

### or... Run all
#guide=guide_All_pops_GML_pops.txt

#extract pop name from guide file
#pop=$( sed -n ${SLURM_ARRAY_TASK_ID}p $guide |  awk '{print $1}' )
#pval=$( sed -n ${SLURM_ARRAY_TASK_ID}p $guide |  awk '{print $2}' )

pop=VA_ch
pval=0.05

echo $pop
echo $pval

###########################################################################
###########################################################################
# Run R
###########################################################################
###########################################################################

Rscript Run_Functional_enrrichment_within_2lt.R $pop $pval